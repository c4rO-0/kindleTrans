<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="{{ url_for('static', filename='Scripts/jquery-3.3.1.js') }}"></script>		
	<link href="{{ url_for('static', filename='css/bootstrap.css') }}" rel="stylesheet" type="text/css">
	<link href="{{ url_for('static', filename='css/TransformEbook.css') }}" rel="stylesheet" type="text/css">	
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
	<script src="{{ url_for('static', filename='Scripts/socket.io.js') }}"></script>			
	<!-- our own scripts -->
	<script src="{{ url_for('static', filename='Scripts/NavBar.js') }}"></script>

    <title>{{ gettext("在线转化txt为mobi") }}</title>
    <script src="{{ url_for('static', filename='Scripts/TransformEbook.js') }}"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    {# 广告 #}
    <!-- Begin BidVertiser code -->
    <SCRIPT data-cfasync="false" SRC="//bdv.bidvertiser.com/BidVertiser.dbm?pid=807493&bid=1941050" TYPE="text/javascript"></SCRIPT>
    <!-- End BidVertiser code --> 
    {# 添加谷歌分析 #}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="{{ url_for('static', filename='js/googleAnalytics.js') }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-119134846-1');
    </script>
</head>

<body>
{# 得到file #}
{% set fileDict = J2SessionQueryFileUpload()  %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-auto align-self-center">
            <h1 style="font-size:4rem; color:dimgray">txt<span style="color:red">2</span>mobi</h1>
        </div>
        <div class="col-auto align-self-end px-1">
            <p class="align-text-bottom">Powered by</p>
        </div>
        <div class="col-auto align-self-end px-1">
            <a href="{{url_for('HomePage')}}">
                <img  class="mb-3" src="{{ url_for('static', filename='images/paper_comment_c4r_logo.png') }}" width="30" height="30">
            </a>
        </div>
    </div>
    <div class="row my-4  bg-light">
        <h3>已转化 {{ J2FunQueryNumTran() }} 本书</h3>
        <div class="w-100"></div>
        <h3>公告 : 每天北京时间22:00-24:00网站进行维护</h3>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-7">
            <h5> txt转mobi(kindle识别的格式),可自动生成目录 </h5>
            <p>使用说明：</p>
            <p>单击"浏览"选择txt文件，点击"提交"开始上传</p>
            <p>上传和初步处理需要一点时间, 去干点别的事情吧~</p>
        </div>
    </div>
    <form  id="formUpload" method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <div class="row justify-content-center">
            <div class="col-md-7 align-self-center">
                <div class="input-group mb-3 border border-primary rounded">
                    <div class="input-group-prepend">
                        <span class="input-group-text">上传</span>
                    </div>
                    <div class="custom-file">
                        {{ form.file(id="fileUpload", class="custom-file-input", accept='text/plain') }}
                        <!-- <input type="file" class="custom-file-input" id="fileUpload"> -->
                        <label class="custom-file-label" id="" for="fileUpload">选择文件</label>
                    </div>
                </div>
                <div class="input-group mb-3 w-75">
                    <div class="input-group-prepend">
                        <span class="input-group-text">作者</span>
                    </div>
                    {{ form.author(class="form-control", placeholder=gettext("作者(选填)")) }}
                    <!-- <input type="text" class="form-control" placeholder="选填" aria-label="Recipient's username" aria-describedby="basic-addon2"> -->
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <div class="input-group mb-3">
                    {{ form.upload(class="btn btn-outline-primary btn-lg", value="提交") }}
                    <!-- <input class="btn btn-outline-primary btn-lg" type="submit" value="Submit"> -->
                </div>
            </div>
        </div>
    </form>
    <!-- <form id="formUpload" method="POST" enctype="multipart/form-data">
        <h1>{{ gettext( "上传" ) }}</h1>
        {{ form.hidden_tag() }}
        {{ form.file }}
        <br>
        {# 作者 #}
        {{ form.author(type="text", placeholder=gettext("作者(选填)")) }}
        <br>
        {# 提交按钮 #}
        {{ form.upload }}
        <br>
        {# 输出错误 #}
        {% for error in form.file.errors %}
        <div class="alert alert-danger" role="alert">
            [{{ error }}]
        </div>
        {% endfor %}
    </form> -->
</div>


{#====================================
<div class="progress" style="display: none;">
    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
        0% 
    </div> 
</div>
=====================================#}
</body>
</html>